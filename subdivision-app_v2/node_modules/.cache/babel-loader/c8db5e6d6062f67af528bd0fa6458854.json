{"ast":null,"code":"//    abc_relative_element.js: Definition of the RelativeElement class.\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar glyphs = require('./abc_glyphs');\n\nvar RelativeElement = function RelativeElement(c, dx, w, pitch, opt) {\n  opt = opt || {};\n  this.x = 0;\n  this.c = c; // character or path or string\n\n  this.dx = dx; // relative x position\n\n  this.w = w; // minimum width taken up by this element (can include gratuitous space)\n\n  this.pitch = pitch; // relative y position by pitch\n\n  this.scalex = opt.scalex || 1; // should the character/path be scaled?\n\n  this.scaley = opt.scaley || 1; // should the character/path be scaled?\n\n  this.type = opt.type || \"symbol\"; // cheap types.\n\n  this.pitch2 = opt.pitch2;\n  this.linewidth = opt.linewidth;\n  this.klass = opt.klass;\n  this.top = pitch;\n  if (this.pitch2 !== undefined && this.pitch2 > this.top) this.top = this.pitch2;\n  this.bottom = pitch;\n  if (this.pitch2 !== undefined && this.pitch2 < this.bottom) this.bottom = this.pitch2;\n\n  if (opt.thickness) {\n    this.top += opt.thickness / 2;\n    this.bottom -= opt.thickness / 2;\n  }\n\n  if (opt.stemHeight) {\n    if (opt.stemHeight > 0) this.top += opt.stemHeight;else this.bottom += opt.stemHeight;\n  } //if (this.type === \"symbol\") {\n  //\tvar offset = glyphs.getYCorr(this.c);\n  //\tthis.top += offset;\n  //\tthis.bottom += offset;\n  //}\n\n\n  this.height = opt.height ? opt.height : 4; // The +1 is to give a little bit of padding.\n\n  this.centerVertically = false;\n\n  switch (this.type) {\n    case \"debug\":\n      this.chordHeightAbove = this.height;\n      break;\n\n    case \"lyric\":\n      if (opt.position && opt.position === 'below') this.lyricHeightBelow = this.height;else this.lyricHeightAbove = this.height;\n      break;\n\n    case \"chord\":\n      if (opt.position && opt.position === 'below') this.chordHeightBelow = this.height;else this.chordHeightAbove = this.height;\n      break;\n\n    case \"text\":\n      if (this.pitch === undefined) {\n        if (opt.position && opt.position === 'below') this.chordHeightBelow = this.height;else this.chordHeightAbove = this.height;\n      } else this.centerVertically = true;\n\n      break;\n\n    case \"part\":\n      this.partHeightAbove = this.height;\n      break;\n  }\n};\n\nRelativeElement.prototype.setX = function (x) {\n  this.x = x + this.dx;\n};\n\nRelativeElement.prototype.setUpperAndLowerElements = function (positionY) {\n  switch (this.type) {\n    case \"part\":\n      this.top = positionY.partHeightAbove + this.height;\n      this.bottom = positionY.partHeightAbove;\n      break;\n\n    case \"text\":\n    case \"chord\":\n      if (this.chordHeightAbove) {\n        this.top = positionY.chordHeightAbove;\n        this.bottom = positionY.chordHeightAbove;\n      } else {\n        this.top = positionY.chordHeightBelow;\n        this.bottom = positionY.chordHeightBelow;\n      }\n\n      break;\n\n    case \"lyric\":\n      if (this.lyricHeightAbove) {\n        this.top = positionY.lyricHeightAbove;\n        this.bottom = positionY.lyricHeightAbove;\n      } else {\n        this.top = positionY.lyricHeightBelow;\n        this.bottom = positionY.lyricHeightBelow;\n      }\n\n      break;\n\n    case \"debug\":\n      this.top = positionY.chordHeightAbove;\n      this.bottom = positionY.chordHeightAbove;\n      break;\n  }\n\n  if (this.pitch === undefined || this.top === undefined) window.console.error(\"RelativeElement position not set.\", this.type, this.pitch, this.top, positionY);\n};\n\nRelativeElement.prototype.draw = function (renderer, bartop) {\n  if (this.pitch === undefined) window.console.error(this.type + \" Relative Element y-coordinate not set.\");\n  var y = renderer.calcY(this.pitch);\n\n  switch (this.type) {\n    case \"symbol\":\n      if (this.c === null) return null;\n      var klass = \"symbol\";\n      if (this.klass) klass += \" \" + this.klass;\n      this.graphelem = renderer.printSymbol(this.x, this.pitch, this.c, this.scalex, this.scaley, renderer.addClasses(klass));\n      break;\n\n    case \"debug\":\n      this.graphelem = renderer.renderText(this.x, renderer.calcY(15), \"\" + this.c, \"debugfont\", 'debug-msg', 'start');\n      break;\n\n    case \"barNumber\":\n      this.graphelem = renderer.renderText(this.x, y, \"\" + this.c, \"measurefont\", 'bar-number', \"middle\");\n      break;\n\n    case \"lyric\":\n      this.graphelem = renderer.renderText(this.x, y, this.c, \"vocalfont\", 'lyric', \"middle\");\n      break;\n\n    case \"chord\":\n      this.graphelem = renderer.renderText(this.x, y, this.c, 'gchordfont', \"chord\", \"middle\");\n      break;\n\n    case \"decoration\":\n      this.graphelem = renderer.renderText(this.x, y, this.c, 'annotationfont', \"annotation\", \"middle\", true);\n      break;\n\n    case \"text\":\n      this.graphelem = renderer.renderText(this.x, y, this.c, 'annotationfont', \"annotation\", \"start\", this.centerVertically);\n      break;\n\n    case \"multimeasure-text\":\n      this.graphelem = renderer.renderText(this.x + this.w / 2, y, this.c, 'tempofont', \"rest\", \"middle\", false);\n      break;\n\n    case \"part\":\n      this.graphelem = renderer.renderText(this.x, y, this.c, 'partsfont', \"part\", \"start\");\n      break;\n\n    case \"bar\":\n      this.graphelem = renderer.printStem(this.x, this.linewidth, y, bartop ? bartop : renderer.calcY(this.pitch2));\n      break;\n    // bartop can't be 0\n\n    case \"stem\":\n      this.graphelem = renderer.printStem(this.x, this.linewidth, y, renderer.calcY(this.pitch2));\n      break;\n\n    case \"ledger\":\n      this.graphelem = renderer.printStaveLine(this.x, this.x + this.w, this.pitch);\n      break;\n  }\n\n  if (this.scalex !== 1 && this.graphelem) {\n    renderer.scaleExistingElem(this.graphelem, this.scalex, this.scaley, this.x, y);\n  }\n\n  return this.graphelem;\n};\n\nmodule.exports = RelativeElement;","map":{"version":3,"sources":["/Users/HTMusic/Desktop/PROJECTS/subdivision-app/subdivision-app_v2/node_modules/abcjs/src/write/abc_relative_element.js"],"names":["glyphs","require","RelativeElement","c","dx","w","pitch","opt","x","scalex","scaley","type","pitch2","linewidth","klass","top","undefined","bottom","thickness","stemHeight","height","centerVertically","chordHeightAbove","position","lyricHeightBelow","lyricHeightAbove","chordHeightBelow","partHeightAbove","prototype","setX","setUpperAndLowerElements","positionY","window","console","error","draw","renderer","bartop","y","calcY","graphelem","printSymbol","addClasses","renderText","printStem","printStaveLine","scaleExistingElem","module","exports"],"mappings":"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","sourcesContent":["//    abc_relative_element.js: Definition of the RelativeElement class.\n//    Copyright (C) 2010-2018 Gregory Dyke (gregdyke at gmail dot com) and Paul Rosen\n//\n//    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated\n//    documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation\n//    the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and\n//    to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n//\n//    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n//\n//    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING\n//    BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n//    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n//    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar glyphs = require('./abc_glyphs');\n\nvar RelativeElement = function RelativeElement(c, dx, w, pitch, opt) {\n\topt = opt || {};\n\tthis.x = 0;\n\tthis.c = c;      // character or path or string\n\tthis.dx = dx;    // relative x position\n\tthis.w = w;      // minimum width taken up by this element (can include gratuitous space)\n\tthis.pitch = pitch; // relative y position by pitch\n\tthis.scalex = opt.scalex || 1; // should the character/path be scaled?\n\tthis.scaley = opt.scaley || 1; // should the character/path be scaled?\n\tthis.type = opt.type || \"symbol\"; // cheap types.\n\tthis.pitch2 = opt.pitch2;\n\tthis.linewidth = opt.linewidth;\n\tthis.klass = opt.klass;\n\tthis.top = pitch;\n\tif (this.pitch2 !== undefined && this.pitch2 > this.top) this.top = this.pitch2;\n\tthis.bottom = pitch;\n\tif (this.pitch2 !== undefined && this.pitch2 < this.bottom) this.bottom = this.pitch2;\n\tif (opt.thickness) {\n\t\tthis.top += opt.thickness/2;\n\t\tthis.bottom -= opt.thickness/2;\n\t}\n\tif (opt.stemHeight) {\n\t\tif (opt.stemHeight > 0)\n\t\t\tthis.top += opt.stemHeight;\n\t\telse\n\t\t\tthis.bottom += opt.stemHeight;\n\t}\n\t//if (this.type === \"symbol\") {\n\t//\tvar offset = glyphs.getYCorr(this.c);\n\t//\tthis.top += offset;\n\t//\tthis.bottom += offset;\n\t//}\n\tthis.height = opt.height ? opt.height : 4; // The +1 is to give a little bit of padding.\n\tthis.centerVertically = false;\n\tswitch (this.type) {\n\t\tcase \"debug\":\n\t\t\tthis.chordHeightAbove = this.height;\n\t\t\tbreak;\n\t\tcase \"lyric\":\n\t\t\tif (opt.position && opt.position === 'below')\n\t\t\t\tthis.lyricHeightBelow = this.height;\n\t\t\telse\n\t\t\t\tthis.lyricHeightAbove = this.height;\n\t\t\tbreak;\n\t\tcase \"chord\":\n\t\t\tif (opt.position && opt.position === 'below')\n\t\t\t\tthis.chordHeightBelow = this.height;\n\t\t\telse\n\t\t\t\tthis.chordHeightAbove = this.height;\n\t\t\tbreak;\n\t\tcase \"text\":\n\t\t\tif (this.pitch === undefined) {\n\t\t\t\tif (opt.position && opt.position === 'below')\n\t\t\t\t\tthis.chordHeightBelow = this.height;\n\t\t\t\telse\n\t\t\t\t\tthis.chordHeightAbove = this.height;\n\t\t\t} else\n\t\t\t\tthis.centerVertically = true;\n\t\t\tbreak;\n\t\tcase \"part\": this.partHeightAbove = this.height; break;\n\t}\n};\n\nRelativeElement.prototype.setX = function (x) {\n\tthis.x = x+this.dx;\n};\n\nRelativeElement.prototype.setUpperAndLowerElements = function(positionY) {\n\tswitch(this.type) {\n\t\tcase \"part\":\n\t\t\tthis.top = positionY.partHeightAbove + this.height;\n\t\t\tthis.bottom = positionY.partHeightAbove;\n\t\t\tbreak;\n\t\tcase \"text\":\n\t\tcase \"chord\":\n\t\t\tif (this.chordHeightAbove) {\n\t\t\t\tthis.top = positionY.chordHeightAbove;\n\t\t\t\tthis.bottom = positionY.chordHeightAbove;\n\t\t\t} else {\n\t\t\t\tthis.top = positionY.chordHeightBelow;\n\t\t\t\tthis.bottom = positionY.chordHeightBelow;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"lyric\":\n\t\t\tif (this.lyricHeightAbove) {\n\t\t\t\tthis.top = positionY.lyricHeightAbove;\n\t\t\t\tthis.bottom = positionY.lyricHeightAbove;\n\t\t\t} else {\n\t\t\t\tthis.top = positionY.lyricHeightBelow;\n\t\t\t\tthis.bottom = positionY.lyricHeightBelow;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"debug\":\n\t\t\tthis.top = positionY.chordHeightAbove;\n\t\t\tthis.bottom = positionY.chordHeightAbove;\n\t\t\tbreak;\n\t}\n\tif (this.pitch === undefined || this.top === undefined)\n\t\twindow.console.error(\"RelativeElement position not set.\", this.type, this.pitch, this.top, positionY);\n};\n\nRelativeElement.prototype.draw = function (renderer, bartop) {\n\tif (this.pitch === undefined)\n\t\twindow.console.error(this.type + \" Relative Element y-coordinate not set.\");\n\tvar y = renderer.calcY(this.pitch);\n\tswitch(this.type) {\n\t\tcase \"symbol\":\n\t\t\tif (this.c===null) return null;\n\t\t\tvar klass = \"symbol\";\n\t\t\tif (this.klass) klass += \" \" + this.klass;\n\t\t\tthis.graphelem = renderer.printSymbol(this.x, this.pitch, this.c, this.scalex, this.scaley, renderer.addClasses(klass)); break;\n\t\tcase \"debug\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, renderer.calcY(15), \"\"+this.c, \"debugfont\", 'debug-msg', 'start'); break;\n\t\tcase \"barNumber\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, y, \"\"+this.c, \"measurefont\", 'bar-number', \"middle\");\n\t\t\tbreak;\n\t\tcase \"lyric\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, y, this.c, \"vocalfont\", 'lyric', \"middle\");\n\t\t\tbreak;\n\t\tcase \"chord\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, y, this.c, 'gchordfont', \"chord\", \"middle\");\n\t\t\tbreak;\n\t\tcase \"decoration\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, y, this.c, 'annotationfont', \"annotation\", \"middle\", true);\n\t\t\tbreak;\n\t\tcase \"text\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, y, this.c, 'annotationfont', \"annotation\", \"start\", this.centerVertically);\n\t\t\tbreak;\n\t\tcase \"multimeasure-text\":\n\t\t\tthis.graphelem = renderer.renderText(this.x+this.w/2, y, this.c, 'tempofont', \"rest\", \"middle\", false);\n\t\t\tbreak;\n\t\tcase \"part\":\n\t\t\tthis.graphelem = renderer.renderText(this.x, y, this.c, 'partsfont', \"part\", \"start\");\n\t\t\tbreak;\n\t\tcase \"bar\":\n\t\t\tthis.graphelem = renderer.printStem(this.x, this.linewidth, y, (bartop)?bartop:renderer.calcY(this.pitch2)); break; // bartop can't be 0\n\t\tcase \"stem\":\n\t\t\tthis.graphelem = renderer.printStem(this.x, this.linewidth, y, renderer.calcY(this.pitch2)); break;\n\t\tcase \"ledger\":\n\t\t\tthis.graphelem = renderer.printStaveLine(this.x, this.x+this.w, this.pitch); break;\n\t}\n\tif (this.scalex!==1 && this.graphelem) {\n\t\trenderer.scaleExistingElem(this.graphelem, this.scalex, this.scaley, this.x, y);\n\t}\n\treturn this.graphelem;\n};\n\nmodule.exports = RelativeElement;\n"]},"metadata":{},"sourceType":"script"}